(self.webpackChunksnake_label=self.webpackChunksnake_label||[]).push([[260],{680:(e,t,n)=>{"use strict";var a=n(757),r=n.n(a),o=n(495),i=n(299);function d(e,t,n,a,r,o,i){try{var d=e[o](i),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){d(o,a,r,i,c,"next",e)}function c(e){d(o,a,r,i,c,"throw",e)}i(void 0)}))}}i.GlobalWorkerOptions.workerSrc="./dist/pdf.worker.min.js";var l=n(729);console.log("Application loaded. debug =",false);var s,u,p=document.getElementById("view");function w(){return(w=c(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,l(t,document.getElementById("file-input").files[0].name.replace(".pdf","")+"-Label.pdf","application/pdf");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return g.apply(this,arguments)}function g(){return(g=c(r().mark((function e(){var t,n,a,i,d,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e){return 72*e/300},c=function(e){return.03937007874*e*72},e.next=4,o.PDFDocument.create();case 4:return t=e.sent,n=l(s.width)+c(6),a=c(62),i=t.addPage([n,a]),e.next=9,t.embedPng(u);case 9:return d=e.sent,i.drawImage(d,{x:c(3),y:c(1.5),width:n-c(6),height:a-c(3)}),e.abrupt("return",t.save());case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}convertLabel.addEventListener("click",(function(){s=function(){switch(document.getElementById("label-type").value){case"dhl-privat":return h;case"dhl-privat-international":return m;default:console.error("Unknown label type.")}}();var e=new FileReader;console.log("Reading file."),e.readAsArrayBuffer(document.getElementById("file-input").files[0]),e.onload=function(){var t=c(r().mark((function t(n){var a,o,d,c,l,w,f,g;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getDocument)(e.result).promise;case 2:return a=t.sent,console.log("PDF loaded.",a),t.next=6,a.getPage(1);case 6:return o=t.sent,d=document.createElement("canvas"),c=o.getViewport({scale:4,rotation:90}),d.width=c.width,d.height=c.height,t.next=12,o.render({canvasContext:d.getContext("2d"),viewport:c}).promise;case 12:return l=new Image,w=new Promise((function(e){return l.onload=e})),l.src=d.toDataURL(),t.next=17,w;case 17:return t.next=19,new Promise((function(e){return setTimeout(e,100)}));case 19:f=document.createElement("canvas"),g=f.getContext("2d"),f.width=s.width,f.height=696,g.fillStyle="white",g.fillRect(0,0,f.width,f.height),g.strokeStyle="black",g.lineWidth=2,s.crop(f,g,l),console.log("Label cropped."),p.src=f.toDataURL(),p.hidden=!0,downloadLabel.disabled=downloadLabelIMG.disabled=!0,f.toBlob((function(e){var t=new FileReader;t.addEventListener("loadend",(function(){u=t.result,p.hidden=!1,downloadLabel.disabled=downloadLabelIMG.disabled=!1})),t.readAsArrayBuffer(e)}),"image/png"),console.log("Finished.");case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),!1),downloadLabel.addEventListener("click",(function(){return w.apply(this,arguments)}),!1),downloadLabelIMG.addEventListener("click",(function(){l(u,document.getElementById("file-input").files[0].name.replace(".pdf","")+"-Label.png","image/png")}),!1);var h={width:1606,crop:function(e,t,n){t.drawImage(n,1964,108,1124,92,0,12,890,73),t.drawImage(n,1964,210,785,625,0,95,580,465);var a=296;t.drawImage(n,2763,215,a,a,594,95,a,a),t.rotate(-Math.PI/2),t.drawImage(n,3075,240,20,190,-395,647,-20,190),t.rotate(Math.PI/2),t.drawImage(n,1964,933,1124,152,0,565,890,120),t.beginPath(),t.moveTo(910,12),t.lineTo(910,e.height-12),t.stroke();var r=676,o=320;t.drawImage(n,2198,1526,r,o,930,20,r,o),t.drawImage(n,2198,1940,r,o,930,364,r,o)}},m={width:1870,crop:function(e,t,n){t.drawImage(n,1964,108,1124,92,0,12,890,73),t.drawImage(n,1964,210,785,625,0,95,580,465);var a=296;t.drawImage(n,2763,215,a,a,594,95,a,a),t.rotate(-Math.PI/2),t.drawImage(n,3075,240,20,190,-395,647,-20,190),t.rotate(Math.PI/2),t.drawImage(n,2770,740,300,35,590,520,300,35),t.drawImage(n,1964,933,1124,152,0,565,890,120),t.beginPath(),t.moveTo(910,12),t.lineTo(910,e.height-12),t.stroke();var r=940,o=280;t.drawImage(n,1964,1422,r,70,930,15,r,70),t.drawImage(n,2070,1634,r,o,930,100,r,o),t.drawImage(n,2070,2048,r,o,930,404,r,o)}}},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},e=>{e.O(0,[660],(()=>{return t=680,e(e.s=t);var t}));e.O()}]);